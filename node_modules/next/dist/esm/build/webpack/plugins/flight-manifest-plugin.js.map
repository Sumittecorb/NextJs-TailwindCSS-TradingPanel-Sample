{"version":3,"sources":["../../../../src/build/webpack/plugins/flight-manifest-plugin.ts"],"names":["path","webpack","sources","CLIENT_REFERENCE_MANIFEST","SYSTEM_ENTRYPOINTS","relative","sep","isClientComponentModule","regexCSS","getProxiedPluginState","traverseModules","nonNullable","WEBPACK_LAYERS","pluginState","serverModuleIds","edgeServerModuleIds","ASYNC_CLIENT_MODULES","PLUGIN_NAME","FlightManifestPlugin","dev","constructor","options","appDir","Set","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","dependencies","ModuleDependency","dependencyTemplates","NullDependency","Template","make","processAssets","name","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","assets","createAsset","context","manifest","__ssr_module_mapping__","__edge_ssr_module_mapping__","__entry_css_files__","clientRequestsSet","collectClientRequest","mod","resource","buildInfo","rsc","requests","forEach","r","add","chunkGroups","chunkGroup","recordModule","id","chunkCSS","isCSSModule","test","type","loaders","some","item","loader","includes","layer","appClient","_identifier","slice","lastIndexOf","moduleIdMapping","edgeModuleIdMapping","ssrNamedModuleId","resourceResolveData","startsWith","replace","chunks","has","exportsInfo","moduleGraph","getExportsInfo","isAsyncModule","cjsExports","map","dep","base","names","filter","flat","getAppPathRequiredChunks","requiredChunk","hash","requiredChunks","esmResource","addClientReference","async","addSSRIdMapping","key","moduleExportedKeys","exports","exportInfo","provided","chunk","chunkModules","chunkGraph","getChunkModulesIterable","files","f","endsWith","modId","getModuleId","anyModule","modules","concatenatedMod","entryCSSFiles","addCSSFilesToEntry","entryName","concat","cssFiles","getFiles","length","getParents","parent","file","json","JSON","stringify","undefined","RawSource"],"mappings":"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"}