{"version":3,"sources":["../../../../src/build/webpack/plugins/next-types-plugin.ts"],"names":["path","promises","fs","webpack","sources","parse","WEBPACK_LAYERS","isDynamicRoute","normalizeAppPath","denormalizePagePath","getPageFromPath","ensureLeadingSlash","PLUGIN_NAME","createTypeGuardFile","fullPath","relativePath","options","type","slots","map","slot","join","collectNamedSlots","layoutPath","layoutDir","dirname","items","readdir","withFileTypes","item","isDirectory","name","startsWith","push","slice","devPageFiles","Set","routeTypes","edge","static","dynamic","node","extra","formatRouteToRouteType","route","isDynamic","split","part","endsWith","routeType","redirectsRewritesTypesProcessed","addRedirectsRewritesRouteTypes","rewrites","redirects","addExtraRoute","source","tokens","Array","isArray","normalizedRoute","token","modifier","prefix","rewrite","beforeFiles","afterFiles","fallback","redirect","createRouteDefinitions","staticRouteTypes","dynamicRouteTypes","NextTypesPlugin","constructor","dir","distDir","appDir","dev","isEdgeServer","pageExtensions","pagesDir","typedRoutes","originalRewrites","originalRedirects","collectPage","filePath","isApp","sep","test","relative","apply","compiler","distDirRelative","assetDirRelative","handleModule","mod","assets","resource","layer","server","IS_LAYOUT","IS_PAGE","relativePathToApp","relativePathToRoot","typePath","replace","relativeImportPath","assetPath","RawSource","hooks","compilation","tap","processAssets","tapAsync","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","callback","chunkGroups","forEach","chunkGroup","chunks","chunk","chunkModules","chunkGraph","getChunkModulesIterable","anyModule","modules","concatenatedMod","Promise","all","file","linkTypePath"],"mappings":"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"}